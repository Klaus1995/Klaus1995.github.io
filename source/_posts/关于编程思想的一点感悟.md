---
title: 关于编程思想的一点感悟
date: 2017-03-07 13:12:27
tags: [Javascript,编程思想]
categories: Javascript
---
# 前言

昨晚在知乎看到了一篇文章，受益匪浅，决定总结一下。

文章地址<a href="https://zhuanlan.zhihu.com/p/25595871" target="_blank">为什么你的前端工作经验不值钱？</a>

---

# 需求

>编写一个javscript函数 fn，该函数有一个参数 n（数字类型），其返回值是一个数组，该数组内是 n 个随机且不重复的整数，且整数取值范围是 [2, 32]。

第一眼看起来好像是很简单，但是实际做起来就有很多坑。

---

# 可用

>作为一段需要满足需求的代码来说，它最核心的、最低的要求：可用。

	function fn(n){
		//准备一个容器
		var arr = new Array();
		//循环
		for(var i = 0 ; i < n ; i ++){
			//生成随机数
			var num = getRand(2,32);
			//检测是否重复
			if(checkArr(arr,num)){
				i --;
			}else{
				arr.push(num);
			}
		}
		//返回数组
		return arr;

		
		//所需要自定义的方法

		//生成随机数
		function getRand(min,max){
			var num = Math.floor(Math.random()*(max-min+1)+2);
			return num;
		}

		//检测是否重复
		function checkArr(arr,num){
			if (arr.indexOf(num) === -1) {
				return false;
			}else{
				return true;
			};
		}
	}
	//测试
	console.log(fn(5));

以上是我参照文章的思路写的一个demo，测试可行。

---

# 健壮

>所谓“健壮”，即最基本的兼容性处理、边界处理，异常处理、用户输入校验。很多时候，需求方不会明确告诉你这些逻辑怎么处理，但并不意味着你不需要处理。

>健壮的程序，一定会将这些兼容性、边界、异常、输入做处理，以保证核心功能的正确输出。当然，如果你的代码没有任何输入并不考虑兼容性（可能吗？）或者仅仅是内部函数，那这一步要求可以降低，并不意味着你可以完全不做。

>好，回过头看代码：

>——如果你没有对 n 的取值范围做校验（n必须是 1 到 31 之间的整数），请将 经验系数 * 0.3；

>——如果你没有对 n 是否为数字做校验，请将 经验系数 * 0.5；

>——如果你没有对 n 是否存在做校验，请将 经验系数 * 0.7；

>——如果上述校验都做了，但是没有校验对，请将 经验系数 * 0.9；你需要多练习，仔细认真的。

文章在这里提出了三个坑，很可能产生bug。

个人认为，第一个坑，只要限制小于等于31且为整数就好，因为如果n小于1，最多返回一个空数组，而大于31则会导致数组中必然存在重复，最后导致无法跳出循环导致无响应。

而n是否为整数并不影响输出，例如 n = 23.231，只会返回一个23个数的数组，这可能与这个方法想要表达的不符，需要检测。

第二个坑，如果未检测n是否为数字，则可能传入乱七八糟的参数，与方法想要实现的功能不符，虽然能输出数组（因为只有一个关系操作符用到了n，js内置强制类型转换，如true会转化成1，‘5’字符串会转化成5，但是很有可能触发第一个坑的无限循环bug），需要检测。

第三个坑，是否对n的存在做校验。如果不传入参数n，n的值为undefined，在进行关系操作符时自动转化成0，输出一个空数组。但是与所要实现的功能不符，需要检测。

针对这三个坑，我对代码进行了改造。

	function fn(n){
		//检测n是否存在
		if(n||n===0){

		}else{
			console.log('请输入参数n');
			return;
		};
		//检测n是否为数值且为整数
		if(parseInt(n)!==n){
			console.log('请输入的n为数值且为整数');
			return;
		};
		//检测是n的取值范围
		if(n<1||n>31){
			console.log('请输入n的取值范围为[1,31]');
			return;
		};
		//准备一个容器
		var arr = new Array();
		//循环
		for(var i = 0 ; i < n ; i ++){
			//生成随机数
			var num = getRand(2,32);
			//检测是否重复
			if(checkArr(arr,num)){
				i --;
			}else{
				arr.push(num);
			}
		}
		//返回数组
		return arr;

		//所需要自定义的方法

		//生成随机数
		function getRand(min,max){
			var num = Math.floor(Math.random()*(max-min+1)+2);
			return num;
		}

		//检测是否重复
		function checkArr(arr,num){
			if (arr.indexOf(num) === -1) {
				return false;
			}else{
				return true;
			};
		}
	}
	//测试
	console.log(fn());

经过测试可用（鬼知道设计算法的时候踩了多少坑）。

---

# 可靠

>javascript没有强数据类型，函数的返回值也无法强制返回的数据格式。但是作为“可靠”的要求，尽可能在任何情况下，都返回一个可靠的结果，哪怕是异常情况下。

于是修改代码，使其在错误的情况下也能返回一个空数组（我把控制台输出错误类型的功能保存了，如果不需要可以删掉相应代码），只需要对代码稍加改造。

	function fn(n){
		//检测n是否存在
		if(n||n===0){

		}else{
			console.log('请输入参数n');
			return [];
		};
		//检测n是否为数值且为整数
		if(parseInt(n)!==n){
			console.log('请输入的n为数值且为整数');
			return [];
		};
		//检测是n的取值范围
		if(n<1||n>31){
			console.log('请输入n的取值范围为[1,31]');
			return [];
		};
		//准备一个容器
		var arr = new Array();
		//循环
		for(var i = 0 ; i < n ; i ++){
			//生成随机数
			var num = getRand(2,32);
			//检测是否重复
			if(checkArr(arr,num)){
				i --;
			}else{
				arr.push(num);
			}
		}
		//返回数组
		return arr;

		//所需要自定义的方法

		//生成随机数
		function getRand(min,max){
			var num = Math.floor(Math.random()*(max-min+1)+2);
			return num;
		}

		//检测是否重复
		function checkArr(arr,num){
			if (arr.indexOf(num) === -1) {
				return false;
			}else{
				return true;
			};
		}
	}
	//测试
	console.log(fn());

---

# 宽容

>如果你要想成为一个受欢迎的技术人员，“宽容”是第一步： 对需求宽容、对用户宽容、对调用者宽容、对维护者宽容。

>——如果 n 是一个字符串数字，是否可以允许进入处理流程？ 如果是，请将经验系数 * 1.1；

>——如果 n 是一个含有小数的数字，比如 3.000001，是否允许进入处理流程？如果是，请将经验系数 * 1.1；

>——你的代码中，是否有足够多且清晰的注释？ 如果是，请将经验系数 * 1.2；

>——如果需求调整了 [2, 32] 的范围，你的代码是否可以快速调整，甚至不用调整？ 如果是，请将经验系数 * 1.2；

	/*获取一个数组，数组内是 n 个随机且不重复的整数，且整数取值范围是 [2, 32]
	* @arguments{number} n 需要的整数个数
	* @return{array} 如果输入非法，则返回一个空数组
	*/
	function fn(n){
		//检测n是否存在
		if(n||n===0){

		}else{
			console.log('请输入参数n');
			return [];
		};
		//检测n是否为数值且为整数
		if(parseInt(n)!==n){
			console.log('请输入的n为数值且为整数');
			return [];
		};
		//检测是n的取值范围
		if(n<1||n>31){
			console.log('请输入n的取值范围为[1,31]');
			return [];
		};
		//准备一个容器
		var arr = new Array();
		//提取出数组范围，可根据需求修改
		var min = 2 , max = 32;
		//循环
		for(var i = 0 ; i < n ; i ++){
			//生成随机数
			var num = getRand(min,max);
			//检测是否重复
			if(checkArr(arr,num)){
				i --;
			}else{
				arr.push(num);
			}
		}
		//返回数组
		return arr;

		//所需要自定义的方法

		//生成随机数
		function getRand(min,max){
			var num = Math.floor(Math.random()*(max-min+1)+2);
			return num;
		}

		//检测是否重复
		function checkArr(arr,num){
			if (arr.indexOf(num) === -1) {
				return false;
			}else{
				return true;
			};
		}
	}
	//测试
	console.log(fn());

原谅我第一点和第二点做不到，需要学习了正则表达式的相关知识才能处理，留坑。

---

# 精益求精

>如果你在实际开发中，时时刻刻留意这些原则，这足够让你的工作经验扩大化，并给你带来更多的认可，这些认可来自于需求方（或许是那个曾经非常蛮横的产品狗）、用户以及你的同事。但不应该包括你自己，你还需要更进一步。

>宽容是宽以待人，精益求精是严以律己。内外兼修才是高手。当你将这五个原则（可用、健壮、可靠、宽容、精益求精）变成你自己的开发习惯，你的工作经验就跟你的工作时间没有关系了。

---

# 总结

这篇文章很好地提出了实际编程开发中所存在的一些问题，如果能考虑到这些，那么编程实力会有很大的提升。

但是，从另一个角度来说，我觉得实际开发中不会留这么多坑，不是每个程序都要考虑这么多，要根据具体的开发环境而定，一般情况下能做到健壮我觉得就可以了，仅代表个人观点。

而文章最高赞评论也说了这个问题，我觉得说的很有道理。

>孟子易：。。。。要是我面试被要求写代码我肯定只写功能→_→健壮性和可扩展性这种东西我为什么要在面试过程中考虑啊。你这种面试方法就不对，因为在实际过程中我可能会根据这个函数的具体运用来考虑他的输入值是否需要检验，以及哪些地方有可能会被扩展，但是面试中，没有上下文的存在，没有一个环境给我，我完全无法推测哪些地方有可能会被扩展，有可能这是一个完全私有或者说要求严格输入的方法，错误的输入导致的报错则可以迅速定位问题，而扩展更是无从谈起，我咋知道你一定要改最小值和最大值？也许你后期的改动是2-10的几率变成80%呢，所以说，如果我面试别人的时候，别人写了你那种代码，我不会觉得他考虑周全，只会觉得他专门为面试刷了题。脱离环境的任何需求都是耍流氓。


如果哪里有错误的话请留下评论，我会及时更正，谢谢观看。